/* Warband Header - background image components */
.warband-header {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  justify-content: center;
  gap: 0;
}

.warband-header-main {
  flex: 0 1 520px;
  min-width: min(100%, 260px);
  display: flex;
  justify-content: center;
}

.warband-header-frame {
  width: min(100%, 900px);
  aspect-ratio: 2556 / 563;
  background-size: 100% 100%;
  background-repeat: no-repeat;
  background-position: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: clamp(8px, 2vw, 16px) clamp(12px, 2.4vw, 28px);
  color: var(--color-text);
}

.warband-header-title h1 {
  font-size: clamp(0.95rem, 1.6vw, 1.5rem);
  letter-spacing: 0.02em;
}

.warband-header-title p {
  margin-top: 0.35rem;
  font-size: clamp(0.55rem, 0.9vw, 0.75rem);
  letter-spacing: 0.35em;
  text-transform: uppercase;
  color: var(--color-text-muted);
}

.warband-header-tabs {
  width: 100%;
  max-width: 80%;
  margin-top: clamp(6px, 1.2vw, 12px);
}

.warband-header-box {
  position: relative;
  flex: 0 1 clamp(170px, 18vw, 260px);
  aspect-ratio: 1077 / 930;
  background-size: 100% 100%;
  background-repeat: no-repeat;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: clamp(10px, 1.6vw, 16px);
  color: var(--color-text);
  overflow: visible;
}

.warband-header-box-content {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  text-align: center;
}

.warband-header-box-label {
  margin: 0;
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.35em;
  color: var(--color-text-muted);
}

.warband-header-stat-grid {
  display: grid;
  width: 100%;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.5rem;
  align-items: center;
  justify-items: center;
}

.warband-header-stat {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.4rem;
  font-size: clamp(0.85rem, 1.4vw, 1.1rem);
  font-weight: 700;
}

.warband-header-stat img {
  width: 1.1rem;
  height: 1.1rem;
}

.warband-header-meta {
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.25em;
  color: var(--color-text-muted);
}

/* Hero Card Grid */
.warband-hero-grid {
  --hero-card-min: 300px;
  --hero-card-max: 500px;
  --hero-gap: 1.25rem;
  display: grid;
  grid-template-columns: repeat( auto-fill, minmax(350px, 1fr) );
  gap: var(--hero-gap);
}

.warband-hero-slot {
  display: flex;
  height: 100%;
  width: 100%;
}

.warband-hero-slot--expanded {
  grid-column: 1 / -1;
  z-index: 20;
}

/* Hero Card - background image */
.warband-hero-card {
  width: 100%;
  height: 100%;
  margin: 0;
  border-radius: 0.5rem;
  border: none;
  background-image: url("../../../assets/containers/card_small.webp");
  background-size: 100% 100%;
  background-repeat: no-repeat;
  background-position: center;
  color: var(--color-text);
  padding: 1.5rem;
  box-shadow: 0 24px 48px rgba(5, 20, 24, 0.35);
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

@media (max-width: 960px) {
  .warband-hero-card {
    background-image: none;
    background-color: rgba(8, 6, 4, 0.6);
    border: 1px solid rgba(110, 90, 59, 0.45);
    box-shadow: none;
    padding: 1rem;
  }
}

.warband-section-hover .section-edit-actions {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.15s ease;
}

.warband-section-hover:hover .section-edit-actions,
.warband-section-hover:focus-within .section-edit-actions {
  opacity: 1;
  pointer-events: auto;
}

.warband-section-hover.warband-section-editing .section-edit-actions {
  opacity: 1;
  pointer-events: auto;
}

/* Hero Expand Button */
.hero-expand-btn {
  transition: filter 0.15s ease;
}

.hero-expand-btn:hover {
  filter: brightness(1.4);
}

/* Hero Stats Table */
.warband-hero-stats-wrapper {
  width: 100%;
  padding: 0.25rem 0.4rem;
}

.warband-hero-stats-table {
  width: 100%;
  border-collapse: collapse;
  text-align: center;
  table-layout: fixed;
}

.warband-hero-stats-table th,
.warband-hero-stats-table td {
  width: 10%;
  border: 1px solid hsl(var(--primary) / 0.2);
  padding: 0.35rem 0.2rem;
}

.warband-hero-stats-table th {
  font-size: var(--text-2xs);
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: var(--color-text-muted);
}

.warband-hero-stats-table td {
  font-size: var(--text-sm);
  font-weight: 600;
}

/* Warchest Popup */
.warchest-anchor {
  position: relative;
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.warchest-float {
  position: absolute;
  left: 50%;
  top: calc(100% + 0.5rem);
  transform: translateX(-50%) translateY(8px) scale(0.98);
  width: min(480px, calc(100vw - 2.5rem));
  max-height: min(520px, calc(100vh - 8rem));
  border: none;
  background: transparent;
  box-shadow: none;
  border-radius: 0;
  padding: 0;
  display: block;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease, transform 0.2s ease;
  z-index: 60;
}

.warchest-float.is-open {
  opacity: 1;
  transform: translateX(-50%) translateY(0) scale(1);
  pointer-events: auto;
}

@media (max-width: 960px) {
  .warchest-float {
    position: fixed;
    left: 50%;
    right: auto;
    top: calc(env(safe-area-inset-top, 0px) + 7rem);
    width: min(420px, calc(100vw - 1.5rem));
    max-height: min(520px, calc(100vh - 8rem));
    transform: translateX(-50%) translateY(8px) scale(0.98);
  }

  .warchest-float.is-open {
    transform: translateX(-50%) translateY(0) scale(1);
  }
}


.warchest-header {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
}

.warchest-kicker {
  font-size: var(--text-2xs);
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: #5b4a39;
  margin: 0;
}

.warchest-title {
  font-size: var(--text-base);
  font-weight: 700;
  margin: 0.25rem 0 0;
  color: #2a1f1a;
}

.warchest-close {
  position: absolute;
  top: 0;
  right: 0;
  border: none;
  background: transparent;
  padding: 0.2rem;
  border-radius: 0.5rem;
  cursor: pointer;
  transition: filter 0.15s ease;
}

.warchest-close:hover {
  filter: brightness(1.1);
}

.warchest-muted {
  font-size: var(--text-sm);
  color: #5b4a39;
}

.warchest-error {
  font-size: var(--text-sm);
  color: hsl(var(--destructive));
}
